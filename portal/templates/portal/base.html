{% load staticfiles %}
{% load app_tags %}
{% load cache %}

<!DOCTYPE html>

<html>
<head>

<title>{% block title %}Code for Life{% endblock %}</title>
{% block head %}
{% endblock head %}

{% block css %}
<link href='{% static "portal/css/common.css" %}' rel="stylesheet">
{% cache 3600 fragment-base-css %}
<link href='{% static "portal/css/jquery-ui.css" %}' rel="stylesheet">
<link href='{% static "portal/css/jquery-ui.structure.css" %}' rel="stylesheet">
<link href='{% static "portal/css/jquery-ui.theme.css" %}' rel="stylesheet">
<link rel="stylesheet" type="text/css" href='{% static "portal/css/styles.css" %}'>
<link rel="stylesheet" type="text/css" href='{% static "portal/css/list.css" %}'>
<link rel="stylesheet" type="text/css" href='{% static "portal/css/tables.css" %}'>
<noscript><link rel="stylesheet" type="text/css" href="portal/css/noJS.css" /></noscript>
{% endcache %}
{% endblock css %}

{% cache 3600 fragment-base-javascript %}
<script type='text/javascript' src='{% static "portal/js/lib/jquery.js" %}'></script>
<script type="text/javascript" src='{% static "portal/js/lib/jquery-ui.js" %}'></script>
<script type="text/javascript" src='{% static "portal/js/lib/modernizr.custom.79639.js" %}'></script>
<script type="text/javascript" src='{% static "portal/js/common.js" %}'></script>
{% endcache %}
<script type="text/javascript" src='{% static "portal/js/jquery.placeholder.js" %}'></script>
<script>
    // Set to 'TEACHER', 'SCHOOL_STUDENT', 'SOLO_STUDENT', or 'UNTRACKED'
    USER_STATUS = '{{ user|get_user_status }}';

</script>

{% block scripts %}
{% endblock scripts %}

</head>

<body>

{% block contentWrapper %}
<div id='contentWrapper'>
    {% block topBar %}
        <div class='topBar'>
            <div class="content">
                <a href="/" class="logo">
                    <span></span>
                    <h1>Code for Life</h1>
                </a>
                    <ul class="topNav">
                        <li>{% block nav_teach %}<a href="{% url 'portal.views.teach' %}">TEACH</a>{% endblock nav_teach %}</li>
                        <li>{% block nav_play %}<a href="{% url 'portal.views.play' %}">PLAY</a>{% endblock nav_play %}</li>
                        {% if user|is_logged_in %}
                            <li>{{ user|make_into_username|truncate:20 }} | <a href="{% url 'portal.views.logout_view' %}">LOGOUT</a></li>
                        {% endif %}
                    </ul>
            </div>
        </div>
    {% endblock topBar %}
    {% block subNav %}
        {% if user|is_logged_in %}
        <div class="subnavBar">
            <div class="subnav">
                    <ul>
                        {% if user|is_logged_in_as_student %}
                            <li>{% block nav_student_dashboard %}<a href="{% url 'portal.views.student_details' %}">Dashboard</a>{% endblock nav_student_dashboard %}</li>
                            <li>{% block nav_student_account %}<a href="{% url 'portal.views.student_edit_account' %}">{% if user.userprofile.student.class_field %}Password{% else %}Account{% endif %}</a>{% endblock nav_student_account %}</li>
                        {% endif %}
                        {% if user|is_logged_in_as_teacher %}
                            <li>{% block nav_teacher_dashboard %}<a href="{% url 'portal.views.teacher_home' %}">Dashboard</a>{% endblock nav_teacher_dashboard %}</li>
                            <li>{% block nav_teacher_classes %}<a href="{% url 'portal.views.teacher_classes' %}">Classes</a>{% endblock nav_teacher_classes %}</li>
                            <li>{% block nav_teacher_account %}<a href="{% url 'portal.views.teacher_edit_account' %}">Account</a>{% endblock nav_teacher_account %}</li>
                            <li>{% block nav_teacher_school %}<a href="{% url 'portal.views.organisation_manage' %}">School | Club</a>{% endblock nav_teacher_school %}</li>
                        {% endif %}
                    </ul>
            </div>
        </div>
        {% endif %}
    {% endblock subNav %}


    {% block contentDiv %}
    <div class="content">

        {% if messages %}
        <ul class="messages">
            {% for message in messages %}
            <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{% if 'safe' in message.tags %}{{ message|safe }}{% else %}{{ message }}{% endif %}</li>
            {% endfor %}
        </ul>
        {% endif %}

        {% block contentTopPadding %}
            <div class="topPadding"></div>
        {% endblock contentTopPadding %}

        {% block content %}
        {% endblock content %}

    </div>
    {% endblock contentDiv %}

    <div class="push"></div>
</div>
{% endblock contentWrapper %}

{% block footer %}
{% cache 3600 fragment-base-footer %}
    <div class="footer">
        <ul>
            <li><a href="{% url 'about' %}">About us</a></li>
            <li><a href="{% url 'contact' %}">Contact Us</a></li>
            <li><a href="{% url 'terms' %}">Terms of use</a></li>
            <li><a href="{% url 'help' %}">Help &amp; Support</a></li>
            <li><a href="http://www.ocadotechnology.com/">Ocado Technology</a> &copy; 2014</li>
        </ul>
    </div>
{% endcache %}
{% endblock footer %}

<div id="confirmation-dialog" title=""></div>

<script>
$(function() {
    $('input, textarea').placeholder();
});
</script>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-49883146-1', 'ocado.com');
ga('send', 'pageview');

</script>

</body>
</html>
