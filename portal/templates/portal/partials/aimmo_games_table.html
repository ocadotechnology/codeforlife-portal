{% load staticfiles %}
{% load app_tags %}
{% block scripts %}
<script type="text/javascript" src="{% static 'portal/js/delete_aimmo_game.js' %}"></script>
{% endblock scripts %}
{% if open_play_games %}
    <div class="col-sm-8 col-center">
        <table id="games-table" class="games-table header-primary data-primary">
            <tr class="games-table__header">
                <th class="cell-left">
                    <p>Game name</p>
                </th>
                <th class="cell-left">
                    <p>Status</p>
                </th>
                <th class="cell-left">
                    <p>Action</p>
                </th>
            </tr>
            {% for game in open_play_games %}
            <tr>
                <td>
                    <div class="games-table__cell">
                        <p><small>{{ game.name }}</small></p>
                    </div>
                </td>
                <td>
                    <div class="games-table__cell">
                        {% if game.status == 'r' %}
                            <div class="status-indicator status-indicator--game status-indicator--on"></div>
                            <small>Running</small>
                        {% elif game.status == 's' %}
                            <div class="status-indicator status-indicator--game status-indicator--off"></div>
                            <small>Stopped</small>
                        {% elif game.status == 'p' %}
                            <div class="status-indicator status-indicator--game status-indicator--standby"></div>
                            <small>Paused</small>
                        {% endif %}
                    </div>
                </td>
                <td>
                    <div class="games-table__buttons">
                        <a class="button button--small button--primary--navigation" href="{% url base_url id=game.id %}">Play</a>
                        <a class="button button--small button--primary--danger" onclick="clickDeleteGame('{{ game.id }}', '{{ game.name }}')"> Delete </a>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </table>
    </div>
    {% popup title="Delete Game" text="Are you sure you want to delete the game: <strong class='popup__game-name'></strong>?</p><p>Deleting will permanently delete players&rsquo; progress for this particular game."  btn1="hidePopup()::Cancel" btn2="deleteGame()::Delete game" %}
{% else %}
    <p>It doesn&rsquo;t look like you have any games created. To create a game, use the &lsquo;Create a new game&rsquo; button above.</p>
{% endif %}
