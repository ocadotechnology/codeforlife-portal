sudo: required
dist: xenial
services:
  - xvfb
language: python
python: 3.6.7
addons:
  chrome: stable

env:
  global:
    - secure: yhZstk2BCizpt3zidJp6+MFXK41/zl4ODA7YexGvVfdtyLkvyi1CSuCiDu+EcZn6QD1SGLcDBxRRB7F4ZTW+I9DHzDNDziawdGkVuUIQowUReklQ9W41sJJKzBO6HYpvp8Wvm8bkDfzwJtVpnKphckUoj8k+OXGmhoAl6/DVCsKiCSuZnJ1BxP2GA9cON2RGjJnKpiARXpLR5Zb+R73ALoi1YGU2o3Go8Z+2s7doibqiDlyzLK3nfHdjG5XgKAeYvn14udVyCtLQuaQe24xwDnc1dIOgkfkLdzjrLxoSNeFwhSowEQuWTyeBHBeDyCtJCLk762HW4qlbIacbl1bH6nLHHLznkTSvfUt9yK0tSpPxqUi4ooQxnMT4XFw+5Mg0e3soTgJKNWgG+1WXQ4+F4AC+l0IJdch0vVlH5WSuibvO1fUNzB5brSyrj0hXXtvEGvB31fXT54E6lhxymuAdLyAXHw4cCCc+UNrW3skn0vj3/J5jecbbwcF0DcOK4bjhJ+xHZJucwWtq6ioXGpj6S0u1Fe1dw3AJNNgyjwWTxaEzt3VQP7Znk0OxKGYyViEeEsF+TvVJyhuaaPGSisGc45I4U0/1bopUa5IrZh3EDpPJ8E1HDf++s2z/iVxqmBmbqU0SRtzhRh+ZIsbe+Lea9wx/Zw7k0AKnF1WQXbHacsY=
    - SELENIUM_WEBDRIVER=default

stages:
  - name: test
    if: tag IS blank

jobs:
  fail_fast: true
  include:
    - stage: test
      install:
        - sudo apt-get install -y ccrypt
        - sudo apt-get install -y sharutils
        - echo SEMAPHORE_API_AUTH = $SEMAPHORE_API_AUTH > api_auth.txt
        - echo SEMAPHORE_PROJECT_ID = $SEMAPHORE_PROJECT_ID > project_id.txt
        - ccencrypt project_id.txt -K $ENC_KEY
        - uuencode -m project_id.txt.cpt project_id.txt.cpt
        - ccencrypt api_auth.txt -K $ENC_KEY
        - uuencode -m api_auth.txt.cpt api_auth.txt.cpt
